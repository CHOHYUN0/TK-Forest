<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:sec="http://thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>TK Forest</title>
    <meta name="keywords"
        content="Bootstrap 5.x, ecommerce, farming, food market, grocery market, grocery shop, grocery store, grocery supper market, multi vendor, organic food, supermarket, supermarket grocery">
    <meta name="description" content="Multipurpose eCommerce HTML Template">
    <meta name="author" content="ashishmaraviya">

    <!-- 댓글 css-->
    <link rel="stylesheet" th:href="@{/css/detail.css}">

    <!-- site Favicon -->
    <link rel="icon" href="assets/img/favicon/favicon.png" sizes="32x32">

    <!-- css Icon Font -->
    <link rel="stylesheet" href="/assets/css/vendor/msicons.min.css">

    <!-- css All Plugins Files -->
    <link rel="stylesheet" href="/assets/css/plugins/animate.css">
    <link rel="stylesheet" href="/assets/css/plugins/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/plugins/bootstrap-select.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/owl.theme.default.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/swiper-bundle.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/slick.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/nouislider.css">

    <!-- Main Style -->
    <link rel="stylesheet" id="main_style" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">

    <script src="/script/expiredate.js"></script>

</head>

<body>

    <!-- Loader -->
    <div id="ms-overlay">
        <div class="loader"></div>
    </div>
    
<!-- Header start  -->
    <header class="ms-header">
        <!-- Header Top Start -->
        <div class="header-top">
            <div class="container">
                <div class="row align-items-center">
                    <!-- Header Top social Start -->
                    <div class="col text-left header-top-left d-none d-lg-block">
                        <div class="header-top-social">
                        </div>
                    </div>
                    <!-- Header Top social End -->
                    <!-- Header Top Message Start -->
                    <div class="col text-center header-top-center">
                        <div class="header-top-message">
                            Leading Platform to Discover and Source Korean Products
                            <div sec:authorize="isAuthenticated()">
                                <a th:href="@{/user/logout}"> Welcome, [[${loginName}]] [[ ${#authentication.name} ]] !</a>
                            </div>
                        </div>
                    </div>
                    <!-- Header Top Message End -->
                    <!-- Header Top Language Currency -->
                    <div class="col header-top-right d-none d-lg-block">
                        <div class="header-top-right-inner d-flex justify-content-end">
                      <a class="ms-help" th:href="@{/aboutUs}" style="display: flex; align-items: center;">
                          <img src="/assets/img/icons/leaf.png" alt="about us icon" style="width: 16px; margin-right: 5px;">
                          About Us
                      </a>
                  </div>
                    </div>
                    <!-- Header Top Language Currency -->
                    <!-- Header Top responsive Action -->
                    <div class="col header-top-res d-lg-none">
                        <div class="ms-header-bottons">
                            <!-- Category Toggle -->
                            <div class="col ms-category-icon-block">
                                <div class="ms-category-menu">
                                    <div class="ms-category-toggle">
                                        <img src="/assets/img/icons/category-icon.svg"
                                            class="svg_img header_svg svg_cat" alt="icon">
                                    </div>
                                </div>
                            </div>
                            <div class="right-icons">
                                <!-- Header User Start -->
                                <a href="login.html" class="ms-header-btn ms-header-user">
                                    <div class="header-icon"><img src="/assets/img/icons/user.svg"
                                            class="svg_img header_svg" alt="">
                                    </div>
                                </a>
                                <!-- Header User End -->
                            </div>
                        </div>
                    </div>
                    <!-- Header Top responsive Action -->
                </div>
            </div>
        </div>
        <!-- Header Top  End -->

        <!-- Header Bottom Start -->
        <div class="ms-header-bottom d-none d-lg-block">
            <div class="container position-relative">
                <div class="row">
                    <div class="ms-flex d-flex align-items-center justify-content-between"> <!-- Flexbox 추가 -->
                        <!-- Header Logo Start -->
                        <div class="align-self-center ms-header-logo">
                            <div class="header-logo">
                                <a th:href="@{/}"><img th:src="@{/img/tkForestlogoB2BLong.png}" alt="Site Logo"></a>
                            </div>
                        </div>
                        <!-- Header Logo End -->

                        <!-- Header Search and Account Button Start -->
                        <div class="d-flex align-items-center justify-content-center flex-grow-1"> <!-- Flexbox 수정 -->
                            <!-- Header Search Start -->
                            <div class="align-self-center ms-header-search mx-auto"> <!-- mx-auto 추가 -->
                                <div class="header-search">
                                    <form class="ms-search-group-form" th:action="@{/product/productList}" method="GET"
                                        id="searchForm">
                                        <input type="hidden" name="page" id="requestPage" th:value="${page}">
                                        <input type="hidden" name="sortBy" id="sortBy" value="registrationDate">
                                        <div class="ms-search-select-inner">
                                            <select class="ms-search-cat selectpicker" id="searchType"
                                                name="searchType">
                                                <option value="ALL" th:selected="${searchType == 'ALL'}">ALL</option>
                                                <option value="Products" th:selected="${searchType == 'Products'}">
                                                    Products</option>
                                                <option value="Brand" th:selected="${searchType == 'Brand'}">Brand
                                                </option>
                                            </select>
                                        </div>
                                        <!-- query없으면 빈값 -->
                                        <input class="form-control ms-search-bar" id="query" th:value="${query}"
                                            placeholder="Search Products..." type="text" name="query">
                                        <button class="search_submit" type="submit">
                                            <img src="/assets/img/icons/search.svg" class="svg_img search_svg" alt="">
                                        </button>
                                    </form>
                                </div>
                            </div>
                            <!-- Header Search End -->

                            <!-- Header Button Start -->
                            <div class="ms-header-bottons">
                                <div class="ms-acc-drop">
                                    <a href="javascript:void(0)"
                                        class="ms-header-btn ms-header-user dropdown-toggle ms-user-toggle"
                                        title="Account">
                                        <div class="header-icon">
                                            <img src="/assets/img/icons/user.svg" class="svg_img header_svg" alt="">
                                        </div>
                                        <div class="ms-btn-desc">
                                            <span class="ms-btn-title">Account</span>
                                            <span sec:authorize="isAuthenticated()" class="ms-btn-stitle">Log Out/My
                                                Page</span>
                                            <span sec:authorize="isAnonymous()" class="ms-btn-stitle">Login/Sign
                                                Up</span>
                                        </div>
                                    </a>
                                    <ul class="ms-dropdown-menu">
                                        <!-- 비회원용 옵션 -->
                                        <li sec:authorize="isAnonymous()">
                                            <a class="dropdown-item" th:href="@{/user/signUp}">Sign Up</a>
                                        </li>
                                        <li sec:authorize="isAnonymous()">
                                            <a class="dropdown-item" th:href="@{/user/login}">Login</a>
                                        </li>
                                        <!-- 회원용 옵션 -->
                                        <li sec:authorize="isAuthenticated()">
                                            <a class="dropdown-item" th:href="@{/user/logout}">Log out</a>
                                        </li>
                                        <!-- 셀러용 옵션 -->
                                        <li sec:authorize="hasRole('ROLE_SELLER')">
                                            <a th:href="@{/user/sellerMypage}">Seller My Page</a>
                                        </li>
                                        <!-- 바이어용 옵션 -->
                                        <li sec:authorize="hasRole('ROLE_BUYER')">
                                            <a th:href="@{/user/buyerMypage}">Buyer My Page</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Header Button End -->
                        </div>
                        <!-- Header Search and Account Button End -->
                    </div>
                </div>
            </div>

        </div>
        <!-- Header Bottom End -->

        <!-- Header menu -->
        <div class="ms-header-cat d-none d-lg-block">
            <div class="container position-relative">
                <div class="row justify-content-between">

                    <!-- Category Toggle -->
                    <div class="col ms-category-icon-block">
                        <div class="ms-category-menu">
                            <div class="ms-category-toggle">
                                <img src="/assets/img/icons/category-icon.svg" class="svg_img header_svg svg_cat"
                                    alt="icon">
                            </div>
                        </div>
                    </div>

                    <!-- Main Menu Start -->

               <div id="ms-main-menu-desk" class="d-none d-lg-block sticky-nav">
                   <div class="position-relative nav-desk">
                       <div class="row">
                           <div class="col-md-12 align-self-center">
                               <div class="ms-main-menu">
                                   <ul style="display: flex; justify-content: flex-start;">
                                  <li class="non-drop">
                               <a th:href="@{/}" style="display: flex; align-items: center;">
                                   <img src="/assets/img/icons/home.png" alt="home icon" style="width: 20px; margin-right: 5px;">
                                   Home
                               </a>
                           </li>
                                       <!-- Categories Dropdown -->
                                       <li class="dropdown drop-list position-static">
                                           <a th:href="@{/product/productList}" class="dropdown-arrow" style="display: flex; align-items: center;">
                                        <img src="/assets/img/icons/price_tag.png" alt="categories icon" style="width: 20px; margin-right: 5px;">
                                        Categories<i class="msicon msi-angle-right"></i>
                                    </a>
   
                                                 <ul class="mega-menu d-block">
                                               <li class="d-flex">
                                                   <span class="bg"></span>
                                                   <ul class="d-block">
                                                       <li class="menu_title"><a th:href="@{/product/productList(categoryNo=11)}">Beauty</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111101)}">Makeup</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111102)}">Other Beauty Products</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111103)}">Makeup Tools</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111104)}">Body & Nail</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111105)}">Beauty Appliance</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111106)}">Fragrance & Deodorant</a></li>
                                                   </ul>
                                                   <ul class="d-block">
                                                       <li class="menu_title"><a th:href="@{/product/productList(categoryNo=11)}">Personal Care</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111201)}">Facial Care</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111202)}">Hair Care</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111203)}">Other Personal Care</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111204)}">Bath Supplies</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111205)}">Body Care</a></li>
                                                       <li><a th:href="@{/product/productList(categoryNo=111206)}">Oral Hygiene</a></li>
                                                     <li><a th:href="@{/product/productList(categoryNo=111207)}">Sanitary Paper</a></li>
                                                     <li><a th:href="@{/product/productList(categoryNo=111208)}">Home Care</a></li>
                                                     <li><a th:href="@{/product/productList(categoryNo=111209)}">Shaving & Hair Removal</a></li>
                                                   </ul>
                                                   <ul class="d-block">
                                                       <li class="menu_title"><a href="javascript:void(0)">Foods</a></li>
                                                       <li><a href="shop-full-width-col-3.html">Admixture & Additives</a></li>
                                                       <li><a href="shop-full-width-col-4.html">Animal Feeds</a></li>
                                                       <li><a href="shop-full-width-col-5.html">Animal Products</a></li>
                                                       <li><a href="shop-full-width-col-6.html">Baby Food</a></li>
                                                       <li><a href="shop-banner-full-width-col-3.html">Baked Goods</a></li>
                                                   </ul>
                                                   <ul class="d-block">
                                                       <li class="menu_title"><a href="javascript:void(0)">More+</a></li>
                                                   </ul>
                                               </li>
                                           </ul>
                                       </li>
                                       
                                       <!-- Discover Dropdown -->
                                       <li class="dropdown drop-list position-static">
                                           <a th:href="@{/}" class="dropdown-arrow" style="display: flex; align-items: center;">
                                               <img src="/assets/img/icons/discover.svg" alt="discover" style="width: 20px; margin-right: 5px;">
                                               Discover<i class="msicon msi-angle-right"></i>
                                           </a>
                                           <ul class="mega-menu d-block" style="margin-right: 0;">
                                        <li class="d-flex">
                                            <span class="bg"></span>
                                            <ul class="d-block">
                                                <li class="menu_title"><a th:href="@{/product/productList}">All Product</a></li>
                                            </ul>
                                            <ul class="d-block">
                                                <li class="menu_title"><a th:href="@{/rec/recList}">Recommendation</a></li>
                                            </ul>
                                            <ul class="d-block">
                                                <li class="menu_title"><a th:href="@{/api/globalMap}">Trend News</a></li>
                                            </ul>
                                            <ul class="d-block">
                                                <li class="menu_title"><a th:href="@{/aboutUs}">About Us</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                       </li>
                                   </ul>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>


                    <!-- Main Menu End -->
                    <div class="col ms-location-block">
                        <div class="ms-location-menu">
                            <div class="ms-location-toggle">
                                <img src="/assets/img/icons/location.svg" class="svg_img header_svg svg_loc" alt="icon">
                                <span class="ms-location-title d-1199 ms-location" id="ms_location"></span>
                                <i class="msicon msi-angle-down d-1199" aria-hidden="true"></i>
                            </div>
                            <div class="ms-location-content">
                                <div class="ms-location-dropdown">
                                    <div class="row ms-location-wrapper">
                                        <ul class="loc-grid">
                                            <li class="loc-list current">your location</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header menu End -->
    </header>
<!-- header end -->

<!-- Breadcrumb start -->
<div class="ms-breadcrumb m-b-30"
th:style="${#authorization.expression('hasRole(''ROLE_SELLER'')')} ? 'background-color: rgb(255, 228, 232); color: fff;' : (${#authorization.expression('hasRole(''ROLE_BUYER'')')} ? 'background-color: rgb(221, 247, 255); color: fff;' : '')">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="row ms_breadcrumb_inner">
                    <div class="col-md-6 col-sm-12">
                        <h2 class="ms-breadcrumb-title">Inquiry Detail</h2>
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <!-- ms-breadcrumb-list start -->
                        <ul class="ms-breadcrumb-list">
                            <li class="ms-readcrumb-item">My Page</li>
                            <li class="ms-breadcrumb-item active"> > Inquiry Detail</li>
                        </ul>
                        <!-- ms-breadcrumb-list end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb end -->

    <!-- Ajax 전송할 때 필요한 정보 -->
    <input type="hidden" id="inquiryNo" th:value="${inquiry.inquiryNo}">
    <input type="hidden" id="loginId" th:value="${#authentication.name}">


    <!-- Contact us section -->
    <section class="ms-contact padding-tb-30">
        <div class="container">
            <div class="section-title-2">
                <h2 class="ms-title">Exchange inquiry</h2>
                <p>Facilitate business matching by exchanging responses to inquiry.</p>
            </div>

            <!-- form 태그에 action 및 method 속성 추가 -->
            <form th:action="@{/inquiry/inquiryWrite}" method="POST" enctype="multipart/form-data">
                <style>
                    /* 공통 스타일 적용 */
                    .form-group {
                        display: flex;
                        align-items: center;
                        margin-bottom: 10px;
                    }

                    .form-group label {
                        width: 150px;
                        margin-right: 10px;
                        text-align: right;
                    }

                    .form-group input,
                    .form-group select,
                    .form-group textarea {
                        flex: 1;
                        padding: 8px;
                        border: 1px solid #ccc;
                        border-radius: 5px;
                    }

                    .custom-btn {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        padding: 20px 20px;
                        border: none;
                        border-radius: 5px;
                        font-size: 16px;
                        color: white;
                        background-color: black;
                        cursor: pointer;
                        transition: background-color 0.3s;
                        margin-left: 20px;
                        font-weight: bold; 
                    }

                    .custom-btn:hover {
                        background-color: #555;
                    }


          			/* 댓글 공통 스타일 */
					.comment {
					    display: flex;
					    flex-direction: column;
					    margin-bottom: 10px;
					    position: relative;
					    /* 자식 요소의 절대 위치 설정을 위한 기준 */
					}
					
					/* 작성자와 작성일을 같은 줄에 배치 */
					.comment-header {
					    display: flex;
					    justify-content: space-between;
					    margin-bottom: 5px;
					}
					
					.comment-author {
					    font-weight: bold;
					}
					
					.comment-date {
					    font-size: 0.8em;
					    color: #888;
					}
					
					/* 바이어 댓글 스타일 - 오른쪽 정렬 */
					.buyer-comment {
					    align-self: flex-start;
					}
					
					.buyer-comment .comment-bubble {
					    background-color: #e0f7fa;
					    margin-left: auto; /* 말풍선 오른쪽 정렬 */
					    border-radius: 10px; /* 모서리 둥글게 */
					    padding: 10px; /* 텍스트와의 간격 추가 */
					}
					
					.buyer-comment .comment-bubble::after {
					    content: "";
					    position: absolute;
					    top: 10px;
					    right: -10px;
					    border-width: 10px 0 10px 15px;
					    border-style: solid;
					    border-color: transparent transparent transparent #e0f7fa;
					}
					
					/* Adjust buyer comment header (author and date) alignment */
					.buyer-comment .comment-header {
					    justify-content: flex-end; /* Align content to the right */
					    text-align: right;
					}
					
					/* Ensure proper spacing between the author and the date */
					.buyer-comment .comment-author {
					    margin-right: 10px;
					}
					
					/* 셀러 댓글 스타일 - 왼쪽 정렬 */
					.seller-comment {
					    align-self: flex-start; /* 댓글을 왼쪽에 정렬 */
					}
					
					.seller-comment .comment-bubble {
					    background-color: #ffe0e0;
					    border-radius: 10px; /* 모서리 둥글게 */
					    padding: 10px; /* 텍스트와의 간격 추가 */
					}
					
					.seller-comment .comment-bubble::after {
					    content: "";
					    position: absolute;
					    top: 10px;
					    left: -10px;
					    border-width: 10px 15px 10px 0;
					    border-style: solid;
					    border-color: transparent #ffe0e0 transparent transparent;
					}
                    
                </style>
                <!-- 제목 입력 -->
                <div class="form-group">
                    <label for="subject">subject</label>
                    <input type="text" id="subject" name="subject" class="form-control" placeholder="subject"
                        th:value="${inquiry.subject}" readonly>
                </div>

                <!-- 발신자 (From) -->
                <div class="form-group">
                    <label for="userName">Sender</label>
                    <!-- 화면에는 바이어의 이름이 보이도록 -->
                    <input type="text" id="buyerPicName" name="buyerPicName" class="form-control"
                        th:value="${inquiry.buyerPicName}" readonly>
                </div>

                <!-- 수신자 (To) -->
                <div class="form-group">
                    <label for="sellerMemberNo">Reciever</label>
                    <input type="text" id="sellerPicName" name="sellerPicName" class="form-control"
                        th:value="${inquiry.sellerPicName}" readonly>
                </div>

                <!-- 상품 이름 -->
                <div class="form-group">
                    <label for="productName">Product Name</label>
                    <input type="text" id="productName" name="productName" class="form-control"
                        th:value="${inquiry.productName}" readonly>
                </div>


                <!-- 발송일 -->
                <div class="form-group">
                    <label for="offerSendDate">Send Date</label>
                    <input type="datetime-local" id="offerSendDate" name="offerSendDate" class="form-control"
                        th:value="${inquiry.offerSendDate}" readonly>
                </div>

                <!-- 만료일 -->
                <div class="form-group">
                    <label for="offerExpireDate">Expiration Date</label>
                    <input type="datetime-local" id="offerExpireDate" name="offerExpireDate" class="form-control"
                        th:value="${inquiry.offerExpireDate}" readonly>
                </div>

                <!-- 주문 수량 -->
                <div class="form-group">
                    <label for="orderQuantity">Order Quantity</label>
                    <input type="number" id="orderQuantity" name="orderQuantity" class="form-control"
                        th:value="${inquiry.orderQuantity}" readonly>
                </div>
                
                 <!-- 주문 수량 단위 -->
                <div class="form-group">
                    <label for="orderUnit">Order Unit</label>
                    <input type="text" id="orderUnit" name="orderUnit" class="form-control"
                        th:value="${inquiry.orderUnit}" readonly>
                </div>

                <!-- 주문 단위 기타 -->
                <div class="form-group">
                    <label for="orderUnitEtc">Order Unit Etc</label>
                    <input type="text" id="orderUnitEtc" name="orderUnitEtc" class="form-control"
                        th:value="${inquiry.orderUnitEtc}" readonly>
                </div>

                <!-- 희망 가격 -->
                <div class="form-group">
                    <label for="expectedPrice">Expected Price</label>
                    <input type="number" id="expectedPrice" name="expectedPrice" class="form-control"
                        th:value="${inquiry.expectedPrice}" readonly>
                </div>

                <!-- 내용 -->
                <div class="form-group">
                    <label for="contents">Contents</label>
                    <textarea id="contents" name="contents" class="form-control" rows="3" readonly
                        th:text="${inquiry.contents}"></textarea>
                </div>

                <!-- 파일 첨부 -->
                <div class="form-group">
                    <label for="file">Attach File</label>
                    <input type="file" id="uploadFile" name="uploadFile" class="form-control">
                </div>
            </form>

            <!-- 댓글 섹션 -->
            <div class="comments-section">
                <div class="section-title-2">
                    <h2 class="ms-title">Exchange Reply</h2>
                    <p>Send and Receive Responses.</p>
                </div>

				<form id="reply-form" class="form-group">
				    <input type="hidden" name="inquiryNo" id="inquiryNo" th:value="${inquiry.inquiryNo}">
				    
				    <!-- Buyer일 경우 -->
				    <input type="hidden" name="replyWriter" id="replyWriter" 
				           th:if="${#authentication.principal instanceof T(com.tkForest.dto.LoginBuyerDetails)}" 
				           th:value="${#authentication.principal.buyerMemberNo}">
				    
				    <!-- Seller일 경우 -->
				    <input type="hidden" name="replyWriter" id="replyWriter" 
				           th:if="${#authentication.principal instanceof T(com.tkForest.dto.LoginSellerDetails)}" 
				           th:value="${#authentication.principal.sellerMemberNo}">
				    
				    <!-- WriterType에 따른 값 설정 -->
				    <input type="hidden" name="replyWriterType" id="replyWriterType"
				           th:value="${#authentication.principal.authorities.iterator().next().authority == 'ROLE_BUYER' ? 'BUYER' : 'SELLER'}">

				</form>

                <div class="form-group">
                    <textarea name="replyContents" id="replyContents" class="form-control"
                        placeholder="please feel free to write your answer." required></textarea>
                    <button type="button" id="submit-reply" class="custom-btn">Send reply</button>
                </div>

                <!-- 댓글 리스트 -->
                <div id="comments-list">
                <div th:each="reply : ${replyList}"
    				 th:classappend="${reply.replyWriterType == 'BUYER' ? 'buyer-comment' : 'seller-comment'} comment-container">
                
                     <div class="comment">
                            <div class="comment-header">
                                <strong class="comment-author" th:text="${reply.replywriter}">작성자</strong>
                                <small class="comment-date"
                                    th:text="${#temporals.format(reply.replyDate, 'yyyy-MM-dd HH:mm')}">작성일</small>
                            </div>
                            <div class="comment-bubble">
                                <p class="comment-content" th:text="${reply.replyContents}">댓글 내용</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 댓글 작성 버튼에 클릭 이벤트 추가
            document.getElementById('submit-reply').addEventListener('click', function () {
                const inquiryNo = document.getElementById('inquiryNo').value;
                const replyWriter = document.getElementById('replyWriter').value;
                const replyWriterType = document.getElementById('replyWriterType').value;
                const replyContents = document.getElementById('replyContents').value;

                if (replyContents.trim() === '') {
                    alert('댓글 내용을 입력하세요.');
                    return;
                }

                const xhr = new XMLHttpRequest();
                xhr.open('POST', '/reply/replyInsert', true);
                xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        loadComments(inquiryNo);
                        document.getElementById('replyContents').value = '';
                    }
                };

                const data = {
                    inquiryNo: inquiryNo,
                    replyWriter: replyWriter,
                    replyWriterType: replyWriterType,
                    replyContents: replyContents
                };

                xhr.send(JSON.stringify(data));
            });

            const inquiryNo = document.getElementById('inquiryNo').value;
            loadComments(inquiryNo);

            function loadComments(inquiryNo) {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', `/reply/replyAll?inquiryNo=${inquiryNo}`, true);

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        const commentsList = document.getElementById('comments-list');
                        commentsList.innerHTML = ''; // 기존 댓글 초기화
                        const replyList = JSON.parse(xhr.responseText);

                        // 최신 댓글을 가장 아래에 추가
                        replyList.reverse().forEach(function (reply) {
                            const newComment = document.createElement('div');
                            newComment.classList.add('comment-container');
                            newComment.classList.add(reply.replyWriterType === 'BUYER' ? 'buyer-comment' : 'seller-comment');
                            newComment.innerHTML = `
                            <strong>${reply.replyWriter}</strong>
                            <div class="comment-bubble">${reply.replyContents}</div>
                            <small>${new Date(reply.replyDate).toLocaleString()}</small>
                        `;
                            commentsList.appendChild(newComment); // 리스트의 끝에 댓글 추가
                        });
                    }
                };

                xhr.send();
            }
        });
    </script>
    <div class="section-title-2">
        <a href="/inquiry/inquiryList" class="custom-btn">List</a>
    </div>
<!-- Footer Start -->
     <footer class="ms-footer m-t-30">
        <div class="footer-container">
           <div class="footer-top padding-tb-60">
              <div class="container">
                 <div class="row m-minus-991">
                    <div class="col-sm-12 col-lg-3 ms-footer-cat">
                       <div class="ms-footer-widget ms-footer-company">
                          <img th:src="@{/img/TKforestlogo_clear.png}" class="ms-footer-logo" alt="footer logo">
                          <p class="ms-footer-detail">
                             DIMA 4th Generation, Team 3's global B2B marketplace, TK FOREST!
                             We aim to be a leading B2B marketplace for discovering and sourcing Korean products.</p>
                          <div class="ms-app-store">
                             <a href="#" class="app-img"><img src="/assets/img/app/android.png" class="adroid"
                                   alt="apple"></a>
                             <a href="#" class="app-img"><img src="/assets/img/app/apple.png" class="apple"
                                   alt="apple"></a>
                          </div>
                       </div>
                    </div>
                    <div class="col-sm-12 col-lg-2 ms-footer-info">
                       <div class="ms-footer-widget">
                          <h4 class="ms-footer-heading">About Us</h4>
                          <div class="ms-footer-links ms-footer-dropdown">
                             <ul class="align-items-center">
                                <li class="ms-footer-link"><a th:href="@{/aboutUs}">About TK FOREST</a></li>
                                <li class="ms-footer-link">
								    <a href="https://www.kita.net/" target="_blank">About KITA</a>
								</li>
                                <li class="ms-footer-link"><a href="privacy-policy.html">Site Map</a></li>
                                <li class="ms-footer-link"><a href="privacy-policy.html">FAQ</a></li>
                             </ul>
                          </div>
                       </div>
                    </div>
                    <div class="col-sm-12 col-lg-2 ms-footer-account">
                       <div class="ms-footer-widget">
                          <h4 class="ms-footer-heading">Category</h4>
                          <div class="ms-footer-links ms-footer-dropdown">
                             <ul class="align-items-center">
                                <li class="ms-footer-link"><a href="shop-left-sidebar-col-3.html">Beauty&Personal
                                      Care</a></li>
                                <li class="ms-footer-link"><a
                                      href="shop-banner-left-sidebar-col-3.html">Machinery&Parts</a></li>
                                <li class="ms-footer-link"><a href="shop-full-width-col-5.html">Food&Beverage</a></li>
                                <li class="ms-footer-link"><a href="shop-list-left-sidebar.html">Industrial
                                      Supplies</a></li>
                                <li class="ms-footer-link"><a href="shop-banner-right-sidebar-col-4.html">More+</a>
                                </li>
                             </ul>
                          </div>
                       </div>
                    </div>
                    <div class="col-sm-12 col-lg-2 ms-footer-service">
                       <div class="ms-footer-widget">
                          <h4 class="ms-footer-heading">Support</h4>
                          <div class="ms-footer-links ms-footer-dropdown">
                             <ul class="align-items-center">
                                <li class="ms-footer-link"><a href="register.html">B2B Matchmaking</a></li>
                                <li class="ms-footer-link"><a href="#">Recommendation</a></li>
                                <li class="ms-footer-link"><a href="#">Trend News</a></li>
                                <li class="ms-footer-link"><a href="#">Buyer Invitation Program</a></li>
                                <li class="ms-footer-link"><a href="cart.html">Request For Quotation</a></li>
                             </ul>
                          </div>
                       </div>
                    </div>
                    <div class="col-sm-12 col-lg-3 ms-footer-cont-social">
                       <div class="ms-footer-contact">
                          <div class="ms-footer-widget">
                             <h4 class="ms-footer-heading">Contact</h4>
                             <div class="ms-footer-links ms-footer-dropdown">
                                <ul class="align-items-center">
                                   <li class="ms-footer-link ms-foo-location"><span><img
                                            src="assets/img/icons/foo-location.svg" class="svg_img foo_svg"
                                            alt=""></span>
                                      <p>777, Yeongdong-daero, Gangnam-gu, Seoul, Republic of Korea</p>
                                   </li>
                                   <li class="ms-footer-link ms-foo-mail"><span><img
                                            src="assets/img/icons/foo-mail.svg" class="svg_img foo_svg"
                                            alt=""></span><a href="mailto:example@email.com">TKFOREST@kita.net</a>
                                   </li>
                                </ul>
                             </div>
                          </div>
                       </div>
                       <div class="ms-footer-social">
                          <div class="ms-footer-widget">
                             <div class="ms-footer-links ms-footer-dropdown">
                                <ul class="align-items-center">
                                   <li class="ms-footer-link"><a href="#"><i class="msicon msi-instagram"
                                            aria-hidden="true"></i></a></li>
                                   <li class="ms-footer-link"><a href="#"><i class="msicon msi-twitter-square"
                                            aria-hidden="true"></i></a></li>
                                   <li class="ms-footer-link"><a href="#"><i class="msicon msi-facebook-square"
                                            aria-hidden="true"></i></a></li>
                                   <li class="ms-footer-link"><a href="#"><i class="msicon msi-linkedin-square"
                                            aria-hidden="true"></i></a></li>
                                </ul>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
              </div>
           </div>
           <div class="footer-bottom">
              <div class="container" style="display: flex; align-items: center;">
                 <div class="row">
                    <div class="ms-bottom-info">
                       <!-- Footer Copyright Start -->
                       <div class="footer-copy">
                          <div class="footer-bottom-copy ">
                             <div class="ms-copy">Copyright © TK FOREST. All rights reserved. <a class="site-name" href="index.html"></a></div>
                          </div>
                       </div>
                       <!-- Footer Copyright End -->
                       <!-- Footer NEWSLETTER ... later-->
                    </div>
                 </div>
              </div>
           </div>
        </div>
     </footer>
     <!-- Footer Area End -->

     <!-- 푸터 끝 -->


     <!-- 다른 프래그먼트나 내용 추가 가능 -->
     <!-- Plugins JS -->
     <script src="/assets/js/plugins/jquery-3.5.1.min.js"></script>
     <script src="/assets/js/plugins/popper.min.js"></script>
     <script src="/assets/js/plugins/bootstrap.bundle.min.js"></script>
     <script src="/assets/js/plugins/bootstrap-select.min.js"></script>
     <script src="/assets/js/plugins/swiper-bundle.min.js"></script>
     <script src="/assets/js/plugins/fontawesome.js"></script>
     <script src="/assets/js/plugins/owl.carousel.min.js"></script>
     <script src="/assets/js/plugins/countdownTimer.js"></script>
     <script src="/assets/js/plugins/infiniteslidev2.js"></script>
     <script src="/assets/js/plugins/jquery.zoom.min.js"></script>
     <script src="/assets/js/plugins/slick.min.js"></script>
     <script src="/assets/js/plugins/nouislider.js"></script>

     <!-- Main Js -->
      <script src="/assets/js/main.js"></script>
      <script src="/assets/js/demo-1.js"></script>
</body>


</html>     